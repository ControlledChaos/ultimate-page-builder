"use strict";!function(e,t,a){e.PageBuilder=e.PageBuilder||{},e.PageBuilder.data={id:"",options:{},contents:""},e.PageBuilder.vue={},e.PageBuilder.iframe=null,e.PageBuilder.iframeMounted=!1,e.PageBuilder.Panel=e.Panel.extend({attachEvents:function(){e.Panel.prototype.attachEvents.call(this);var t=a("#page-builder-options-wrap"),i=this.container.find(".panel-meta"),n=i.find(".customize-page-builder-options-toggle");n.on("click keydown",function(a){if(!e.utils.isKeydownButNotEnterEvent(a))return a.preventDefault(),"true"===n.attr("aria-expanded")?(n.attr("aria-expanded","false"),i.removeClass("open"),i.removeClass("active-page-builder-options"),t.slideUp("fast")):(n.attr("aria-expanded","true"),i.addClass("open"),i.addClass("active-page-builder-options"),t.slideDown("fast")),!1})},ready:function(){e.Panel.prototype.ready.call(this),this.container.find("#enable-page-builder").on("click",function(){var t=this;e("enable_page_builder",function(e){a(t).prop("checked")?e.set(a(t).val()):e.set("")})})}}),a.extend(e.panelConstructor,{page_builder_panel:e.PageBuilder.Panel}),e.PageBuilder.Preview={init:function(){var t=this;this.preview=e.previewer,this.preview.bind("page_builder_data",function(i){t.setState(i),t.setVue(),t.setIframeVue();a(e.previewer.container).find("iframe")[0].contentWindow.window.document,a(".customize-control").prop("draggable",!0),e.PageBuilder.iframe.getElementById("#starter-app")})},setState:function(t){e.PageBuilder.data=a.extend(e.PageBuilder.data,t)},getState:function(){return e.PageBuilder.data},setIframeVue:function(){e.PageBuilder.iframe=a(e.previewer.container).find("iframe")[0].contentWindow.window.document,e.PageBuilder.vueIframe=new Vue({delimiters:["${","}"],unsafeDelimiters:["$!{","}"],data:e.PageBuilder.data,el:a("#starter-app",e.PageBuilder.iframe)[0]})},setVue:function(){}},e.bind("ready",function(){e.PageBuilder.Preview.init()})}(wp.customize,wp,jQuery);